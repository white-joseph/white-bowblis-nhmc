source("C:/Repositories/white-bowblis-nhmc/regressions/sensitivity_analysis.R", echo = TRUE)
View(df)
?sunab
??sunab
source("~/.active-rstudio-document", echo = TRUE)
source("~/.active-rstudio-document", echo = TRUE)
source("~/.active-rstudio-document", echo = TRUE)
source("~/.active-rstudio-document", echo = TRUE)
source("~/.active-rstudio-document", echo = TRUE)
library(dplyr)
library(readr)
library(fixest)
library(did)
# === Load panel ===
panel <- "data\clean\panel.csv"
source("~/.active-rstudio-document", echo = TRUE)
source("~/.active-rstudio-document", echo = TRUE)
source("~/.active-rstudio-document", echo = TRUE)
source("~/.active-rstudio-document", echo = TRUE)
source("~/.active-rstudio-document", echo = TRUE)
source("~/.active-rstudio-document", echo = TRUE)
View(df)
df2 <- read_csv("data/clean/analytical_panel.csv")
View(df2)
gc()
source("~/.active-rstudio-document", echo = TRUE)
source("~/.active-rstudio-document", echo = TRUE)
source("~/.active-rstudio-document", echo = TRUE)
+
source("C:/Repositories/white-bowblis-nhmc/regressions/sensitivity_analysis.R", echo = TRUE)
source("C:/Repositories/white-bowblis-nhmc/regressions/did_event_study.R", echo = TRUE)
# =================== CLEAN PARALLEL TREND SUMMARY TABLE ===================
library(dplyr)
library(knitr)
# Helper to run and collect results for a model
summ_pretrend <- function(label, mod, ref, from = -12, to = -5) {
r_all  <- pretrend_wald(mod, ref, from = -24, to = -2)
r_win  <- pretrend_wald(mod, ref, from = from,  to = to)
r_near <- nearest_pre_test(mod, ref)
tibble(
Specification   = label,
`Ref (τ)`       = ref,
`All pre p`     = if (!is.null(r_all$p.value)) sprintf("%.4f", r_all$p.value) else "NA",
`Window p [-12,-5]` = if (!is.null(r_win$p.value)) sprintf("%.4f", r_win$p.value) else "NA",
`Nearest τ`     = if (!is.null(r_near$tau)) r_near$tau else NA_integer_,
`Nearest p`     = if (!is.null(r_near$p.value)) sprintf("%.4f", r_near$p.value) else "NA"
)
}
# Collect results for your key specs
pretrend_table <- bind_rows(
summ_pretrend("Total HPPD — With anticipation", m_tot_full,  ref_full),
summ_pretrend("Log Total HPPD — Donut 1",       m_ltot_a1,   ref_noant1),
summ_pretrend("Total HPPD — Donut 2",           m_tot_a2,    ref_noant2)
)
# Print a clean table to console (or include in PDF)
kable(
pretrend_table,
caption = "Parallel Trends / Pretrend Test Summary",
align = "lccccc",
col.names = c("Specification", "Ref (τ)", "All pre p-value", "Window p-value [-12,-5]", "Nearest τ", "Nearest p-value"),
digits = 4
)
View(pretrend_table)
summ_pretrend <- function(label, mod, ref, from = -12, to = -5) {
r_all  <- pretrend_wald(mod, ref, from = -24, to = -2)
r_win  <- pretrend_wald(mod, ref, from = from,  to = to)
r_near <- nearest_pre_test(mod, ref)
tibble(
Specification   = label,
`Ref (τ)`       = ref,
`All pre p`     = if (!is.null(r_all$p.value)) sprintf("%.4f", r_all$p.value) else "NA",
`Window p [-12,-5]` = if (!is.null(r_win$p.value)) sprintf("%.4f", r_win$p.value) else "NA",
`Nearest τ`     = if (!is.null(r_near$tau)) r_near$tau else NA_integer_,
`Nearest p`     = if (!is.null(r_near$p.value)) sprintf("%.4f", r_near$p.value) else "NA"
)
}
# Collect results for your key specs
pretrend_table <- bind_rows(
summ_pretrend("Total HPPD — With anticipation", m_tot_full,  ref_full),
summ_pretrend("Log Total HPPD — Donut 1",       m_tot_a1,   ref_noant1),
summ_pretrend("Total HPPD — Donut 2",           m_tot_a2,    ref_noant2)
)
# Print a clean table to console (or include in PDF)
kable(
pretrend_table,
caption = "Parallel Trends / Pretrend Test Summary",
align = "lccccc",
col.names = c("Specification", "Ref (τ)", "All pre p-value", "Window p-value [-12,-5]", "Nearest τ", "Nearest p-value"),
digits = 4
)
pretrend_table <- bind_rows(
summ_pretrend("Total HPPD — With anticipation", m_tot_full,  ref_full),
summ_pretrend("Total HPPD — Donut 1",       m_tot_a1,   ref_noant1),
summ_pretrend("Total HPPD — Donut 2",           m_tot_a2,    ref_noant2)
)
pretrend_table <- bind_rows(
summ_pretrend("Total HPPD — With anticipation", m_tot_full,  ref_full),
summ_pretrend("Total HPPD — Donut 1",       m_tot_a1,   ref_noant1),
summ_pretrend("Total HPPD — Donut 2",           m_tot_a2,    ref_noant2)
)
# Print a clean table to console (or include in PDF)
kable(
pretrend_table,
caption = "Parallel Trends / Pretrend Test Summary",
align = "lccccc",
col.names = c("Specification", "Ref (τ)", "All pre p-value", "Window p-value [-12,-5]", "Nearest τ", "Nearest p-value"),
digits = 4
)
gc()
source("C:/Repositories/white-bowblis-nhmc/regressions/did_twfe.R", echo = TRUE)
gc()
source("C:/Repositories/white-bowblis-nhmc/regressions/sensitivity_analysis.R", echo = TRUE)
source("C:/Repositories/white-bowblis-nhmc/regressions/event_study.R", echo = TRUE)
source("C:/Repositories/white-bowblis-nhmc/regressions/twfe.R", echo = TRUE)
gc()
source("C:/Users/Owner/Downloads/twfe_write_tex.R", echo = TRUE)
source("C:/Users/Owner/Downloads/twfe_write_tex_fixed.R", echo = TRUE)
wd()
source("C:/Repositories/white-bowblis-nhmc/regressions/robustness_checks.R", echo = TRUE)
source("C:/Repositories/white-bowblis-nhmc/regressions/robustness_checks.R", echo = TRUE)
source("C:/Repositories/white-bowblis-nhmc/regressions/robustness_checks.R", echo = TRUE)
gc()
source("C:/Repositories/white-bowblis-nhmc/regressions/robustness_checks.R", echo = TRUE)
source("C:/Repositories/white-bowblis-nhmc/regressions/robustness_checks.R", echo = TRUE)
gc()
source("C:/Repositories/white-bowblis-nhmc/regressions/twfe_event_study.R", echo = TRUE)
source("C:/Repositories/white-bowblis-nhmc/regressions/twfe_event_study.R", echo = TRUE)
source("C:/Repositories/white-bowblis-nhmc/regressions/twfe_event_study.R")
source("C:/Repositories/white-bowblis-nhmc/regressions/twfe_event_study.R")
gc()
source("C:/Repositories/white-bowblis-nhmc/regressions/parallel_trends_test.R")
gc()
source("C:/Repositories/white-bowblis-nhmc/regressions/parallel_trends_test.R")
gc()
gc()
source("C:/Repositories/white-bowblis-nhmc/regressions/parallel_trends_test.R")
gc()
gc()
source("C:/Repositories/white-bowblis-nhmc/regressions/parallel_trends_test.R")
gc()
source("C:/Repositories/white-bowblis-nhmc/regressions/parallel_trends_test.R")
